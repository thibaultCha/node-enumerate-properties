// Generated by CoffeeScript 1.7.1
module.exports = {

  /*
   * # enumerate(object, callback)
   *
   * Enumerates properties in a JSON object and callback
   * each as a dot notation format
   *
   * @param {Object} object The object on which to iterate
   * @param {Function} callback Callback function called for each property
   */
  enumerate: function(object, callback) {
    var walk;
    walk = (function(obj, stack) {
      var prop, str, val;
      stack = stack || '';
      if (typeof obj !== 'object') {
        return true;
      }
      for (prop in obj) {
        val = obj[prop];
        if (walk(val, stack + '.' + prop)) {
          str = '';
          if (stack) {
            str = stack.substring(1) + '.';
          }
          str += prop;
          callback(str, val);
        }
      }
      return false;
    });
    return walk(object);
  },

  /*
   * # getAtPath(object, path)
   *
   * Retrieve nested value from a JSON object given
   * the dot notation of it's property
   *
   * @param {Object} object The object on which to get a value
   * @param {String} path Dot notation of the property to get
   * @return {* | null}
   */
  getAtPath: function(object, path) {
    var i, props, _i, _len;
    if (path === null) {
      return null;
    }
    props = path.split('.');
    for (_i = 0, _len = props.length; _i < _len; _i++) {
      i = props[_i];
      if (!object || typeof object !== 'object') {
        return null;
      }
      object = object[i];
    }
    if (object === void 0) {
      return null;
    }
    return object;
  },

  /*
   * # setAtPath(object, path, value)
   *
   * Set nested value of a JSON object to the given
   * dot notation path
   *
   * @param {Object} object The object on which to set
   * @param {String} path Dot notation of the property to set
   * @param {*} value Value to set
   */
  setAtPath: function(object, path, value) {
    var i, len, parts, _i;
    parts = path.split('.');
    len = parts.length - 1;
    for (i = _i = 0; 0 <= len ? _i < len : _i > len; i = 0 <= len ? ++_i : --_i) {
      if (!object[parts[i]]) {
        object[parts[i]] = {};
      }
      object = object[parts[i]];
    }
    return object[parts[len]] = value;
  }
};
